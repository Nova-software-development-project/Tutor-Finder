<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova software development project</title>
    <link rel="stylesheet" href="./styles/default.css">
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.querySelector("form");

            form.addEventListener("submit", function (event) {
                let isValid = true;

                // Clear all previous error messages
                document.querySelectorAll(".error-message").forEach(span => {
                    span.textContent = ""; // Clear the message
                    span.style.display = "none"; // Hide the error box by default
                });

                // Function to show error messages
                function showError(inputId, message) {
                    const inputField = document.getElementById(inputId);
                    const errorSpan = inputField.nextElementSibling;

                    if (errorSpan) {
                        errorSpan.textContent = message;
                        errorSpan.style.display = message ? "block" : "none"; // Show or hide based on message presence
                    }
                    isValid = false;
                }

                // Validate first name
                const firstName = document.getElementById("firstName").value.trim();
                if (firstName === "") {
                    showError("firstName", "First name is required.");
                }

                // Validate last name
                const lastName = document.getElementById("lastName").value.trim();
                if (lastName === "") {
                    showError("lastName", "Last name is required.");
                }

                // Validate email format
                const email = document.getElementById("email").value.trim();
                const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                if (!emailPattern.test(email)) {
                    showError("email", "Enter a valid email address.");
                } 
                const validateEmail = (email) => {
                    if (!email.includes('@')){
                        return false;
                    }
                    const emailParts = email.split('@');
                    if (emailParts[1] === 'uncc.edu' || emailParts[1] === 'charlotte.edu'){
                        return true;
                    } else{
                        return false;
                    }
                }
                if (!validateEmail(email)) {
                    showError("email", "Enter a uncc/charlotte.edu email address");
                }

                // Validate year selection
                const year = document.getElementById("year").value;
                if (year === "") {
                    showError("year", "Please select your academic year.");
                }

                // Validate major
                const major = document.getElementById("major").value;
                if (major === "") {
                    showError("major", "Major is required.");
                }

                // Validate password strength
                const password = document.getElementById("password").value;
                if (password.length < 6) {
                    showError("password", "Password must be at least 6 characters long.");
                }

                // Prevent form submission if validation fails
                if (!isValid) {
                    event.preventDefault();
                }
            });

            // Function to load image preview
            function loadImage() {
                const image = document.getElementById("image").files[0];
                if (image) {
                    const imageUrl = URL.createObjectURL(image);
                    document.getElementById("load-image").innerHTML = `<img src="${imageUrl}" alt="Preview">`;
                } else {
                    alert("Please select an image to load.");
                }
            }

            // Set up image load button click handler
            document.getElementById("load-image-btn").addEventListener("click", loadImage);
        });
    </script>
</head>
<body>
    <header>
        <h1>Tutor Finder</h1>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="./calendar.html">Calendar</a></li>
                <li><a href="./profile.html">Profile</a></li>
                <li><a href="signup.html">Sign Up</a></li>
                <li><a href="login.html">Log In</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="signup">
            <h2>Create profile</h2>
            <p>or <a href="login.html">Sign In</a></p>
            <form action="/api/auth/signup" method="POST" novalidate>
                <div>
                    <label for="firstName">First Name:</label>
                    <input type="text" id="firstName" name="firstName" placeholder="Norm">
                    <span class="error-message"></span>
                </div>
                <div>
                    <label for="lastName">Last Name:</label>
                    <input type="text" id="lastName" name="lastName" placeholder="Niner">
                    <span class="error-message"></span>
                </div>
                <div>
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" placeholder="norm@charlotte.edu">
                    <span class="error-message"></span>
                </div>
                <div>
                    <label>Image:</label>
                    <input type="file" id="image">
                    <button type="button" id="load-image-btn">CLICK HERE TO LOAD</button>
                    <div id="load-image"></div>
                </div>
                <div>
                    <label for="year">Year:</label>
                    <select name="year" id="year">
                        <option value="" selected disabled>Select Year</option>
                        <option value="freshman">Freshman</option>
                        <option value="sophomore">Sophomore</option>
                        <option value="junior">Junior</option>
                        <option value="senior">Senior</option>
                        <option value="Grad">Graduate Student</option>
                    </select>
                    <span class="error-message"></span>
                </div>
                <div>
                    <label for="major">Major:</label>
                    <select name="major" id="major">
                        <option value="" selected disabled>Select Major</option>
                        <option value="Accounting">Accounting</option>
                        <option value="Africana Studies">Africana Studies</option>
                        <option value="Anthropology">Anthropology</option>
                        <option value="Architecture">Architecture</option>
                        <option value="Art">Art</option>
                        <option value="Biology">Biology</option>
                        <option value="Business Administration">Business Administration</option>
                        <option value="Business Analytics">Business Analytics</option>
                        <option value="Chemistry">Chemistry</option>
                        <option value="Child and Family Development">Child and Family Development</option>
                        <option value="Civil Engineering">Civil Engineering</option>
                        <option value="Communication Studies">Communication Studies</option>
                        <option value="Computer Engineering">Computer Engineering</option>
                        <option value="Construction Management">Construction Management</option>
                        <option value="Criminal Justice">Criminal Justice</option>
                        <option value="Dance">Dance</option>
                        <option value="Data Science">Data Science</option>
                        <option value="Earth and Environmental Sciences">Earth and Environmental Sciences</option>
                        <option value="Economics">Economics</option>
                        <option value="Electrical Engineering">Electrical Engineering</option>
                        <option value="Electromechanical Engineering Technology">Electromechanical Engineering Technology</option>
                        <option value="Elementary Education">Elementary Education</option>
                        <option value="English">English</option>
                        <option value="Environmental Engineering,">Environmental Engineering,</option>
                        <option value="Environmental Studies">Environmental Studies</option>
                        <option value="Exercise Science">Exercise Science</option>
                        <option value="Finance">Finance</option>
                        <option value="Fire and Safety Engineering Technology">Fire and Safety Engineering Technology</option>
                        <option value="French">French</option>
                        <option value="Geography">Geography</option>
                        <option value="Geology">Geology</option>
                        <option value="German">German</option>
                        <option value="Global Studies">Global Studies</option>
                        <option value="Graphic Design">Graphic Design</option>
                        <option value="Health Systems Management">Health Systems Management</option>
                        <option value="History">History</option>
                        <option value="Interdisciplinary Studies">Interdisciplinary Studies</option>
                        <option value="International Business">International Business</option>
                        <option value="Japanese Studies">Japanese Studies</option>
                        <option value="Latin American Studies">Latin American Studies</option>
                        <option value="Management">Management</option>
                        <option value="Marketing">Marketing</option>
                        <option value="Mathematics">Mathematics</option>
                        <option value="Mechanical Engineering Technology">Mechanical Engineering Technology</option>
                        <option value="Mechanical Engineering">Mechanical Engineering</option>
                        <option value="Meteorology">Meteorology</option>
                        <option value="Middle Grades Education">Middle Grades Education</option>
                        <option value="Music">Music</option>
                        <option value="Nursing">Nursing</option>
                        <option value="Operations and Supply Chain Management">Operations and Supply Chain Management</option>
                        <option value="Philosophy">Philosophy</option>
                        <option value="Physics">Physics</option>
                        <option value="Political Science">Political Science</option>
                        <option value="Professional Studies">Professional Studies</option>
                        <option value="Psychology">Psychology</option>
                        <option value="Public Health">Public Health</option>
                        <option value="Religious Studies">Religious Studies</option>
                        <option value="Respiratory Therapy">Respiratory Therapy</option>
                        <option value="Social Work">Social Work</option>
                        <option value="Sociology">Sociology</option>
                        <option value="Spanish">Spanish</option>
                        <option value="Special Education">Special Education</option>
                        <option value="Systems Engineering">Systems Engineering</option>
                        <option value="Theatre">Theatre</option>
                        <option value="Writing">Writing</option>
                    </select>
                    <span class="error-message"></span>
                </div>
                <div>
                    <label for="bio">Bio (optional)</label>
                    <textarea name="bio" id="bio" cols="30" rows="10"></textarea>
                </div>
                <div>
                    <label for="role">Role:</label>
                    <input type="checkbox" name="tutor" value="tutor"> Tutor
                    <br>
                    <input type="checkbox" name="tutee" value="tutee"> Tutee
                </div>
                <div>
                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password" placeholder="password123">
                    <span class="error-message"></span>
                </div>
                <br>
                <input type="submit" value="Create" class="button">
            </form>
        </div>
    </main>
    <footer></footer>
</body>
</html>